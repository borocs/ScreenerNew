–î—è–∫—É—é –∑–∞ —É—Ç–æ—á–Ω–µ–Ω–Ω—è. –Ø —Ä–æ–∑–ø–∞–∫—É—é –∞—Ä—Ö—ñ–≤ —ñ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—é –≤—Å—ñ Python-—Ñ–∞–π–ª–∏ —Ç–∞ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –±–∞–≥—ñ–≤, –∑–æ–∫—Ä–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—é –ª–æ–≥—ñ–∫—É —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥, –ø—Ä–æ–±–ª–µ–º–∏ –∑ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è–º —ñ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —á–∞—Å—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç—É –¥–ª—è –º–æ–Ω–µ—Ç —Ç–∏–ø—É ETH. –î–∞–º –∑–Ω–∞—Ç–∏, —â–æ–π–Ω–æ –±—É–¥–µ –≥–æ—Ç–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑.


# üìä –û–≥–ª—è–¥ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ —Ç–∞ –ª–æ–≥—ñ–∫–∏ —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞

–ü—Ä–æ—î–∫—Ç **–∞–≥—Ä–µ—Å–∏–≤–Ω–æ–≥–æ —Ç—Ä–µ–π–¥–∏–Ω–≥-–±–æ—Ç–∞** –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–æ –º–æ–¥—É–ª—å–Ω–æ. –ö–æ–∂–µ–Ω —Ñ–∞–π–ª –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Å–≤—ñ–π –∞—Å–ø–µ–∫—Ç —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞:

* **`trade.py`** ‚Äì –≥–æ–ª–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î –±–æ—Ç–∞. –í—ñ–Ω —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (–±—ñ—Ä–∂–µ–≤–∏–π –∫–ª—ñ—î–Ω—Ç, —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏, —Ç–æ—â–æ) —ñ –∑–∞–ø—É—Å–∫–∞—î –æ—Å–Ω–æ–≤–Ω–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ü–∏–∫–ª `trade()`. –£ —Ü—å–æ–º—É —Ü–∏–∫–ª—ñ –±–æ—Ç –ø–æ—Å—Ç—ñ–π–Ω–æ –æ—Ç—Ä–∏–º—É—î —Å–∏–≥–Ω–∞–ª–∏, –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥ —ñ –∫–µ—Ä—É—î –≤—ñ–¥–∫—Ä–∏—Ç–∏–º–∏ –ø–æ–∑–∏—Ü—ñ—è–º–∏.
* **`trade_core.py`** ‚Äì —è–¥—Ä–æ –ª–æ–≥—ñ–∫–∏ —Ç–æ—Ä–≥—ñ–≤. –ú—ñ—Å—Ç–∏—Ç—å –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ä–æ–∑–º—ñ—Ä—É **–º–∞—Ä–∂—ñ** —Ç–∞ **–∫—ñ–ª—å–∫–æ—Å—Ç—ñ** –¥–ª—è –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É, –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø–ª–µ—á–∞ —ñ —Ü—ñ–Ω–∏. –¢—É—Ç –∂–µ –≤–µ–¥–µ—Ç—å—Å—è **–ª–æ–≥ —É–≥–æ–¥** —Ç–∞ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –º–µ—Ç–∞–¥–∞–Ω—ñ –ø–æ–∑–∏—Ü—ñ–π (—Å—Ç–æ—Ä–æ–Ω–∞ —É–≥–æ–¥–∏, –∫—ñ–ª—å–∫—ñ—Å—Ç—å, —Ä—ñ–≤–Ω—ñ SL/TP/—Ç—Ä–∞–ª—ñ–≥—É).
* **`trade_signals.py`** ‚Äì –æ–±—Ä–æ–±–∫–∞ —Ç–æ—Ä–≥–æ–≤–∏—Ö **—Å–∏–≥–Ω–∞–ª—ñ–≤**. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ä–∏–Ω–∫–æ–≤—ñ –¥–∞–Ω—ñ (–∫–Ω–∏–≥–∞ –æ—Ä–¥–µ—Ä—ñ–≤, OHLCV) –¥–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏, —Ñ—ñ–ª—å—Ç—Ä—É—î –ø–∞—Ä–∏ –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏ (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –æ–±—Å—è–≥ —Ç–æ—Ä–≥—ñ–≤, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Å–ø—Ä–µ–¥, –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å ATR —Ç–æ—â–æ) —ñ —Ñ–æ—Ä–º—É—î —Å–∏–≥–Ω–∞–ª: –∫—É–ø—É–≤–∞—Ç–∏, –ø—Ä–æ–¥–∞–≤–∞—Ç–∏ —á–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏. –°–∏–≥–Ω–∞–ª–∏ “ë—Ä—É–Ω—Ç—É—é—Ç—å—Å—è –Ω–∞ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—è—Ö —ñ–∑ ML-–º–æ–¥–µ–ª—ñ (Random Forest) —Ç–∞ –ø–æ—Ä–æ–≥–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω–Ω—è—Ö, –∑–∞–¥–∞–Ω–∏—Ö —É `config.py`.
* **`trade_orders.py`** ‚Äì –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–æ—Ä–≥–æ–≤–∏–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏. –í–∏—Å—Ç–∞–≤–ª—è—î **—Å—Ç–æ–ø-–ª–æ—Å (SL)**, **—Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç (TP)** —Ç–∞ **—Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø** –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–æ–∑–∏—Ü—ñ—ó. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±—ñ—Ä–∂–µ–≤–∏–π API: –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä–∏—Ç–∏ OCO-–æ—Ä–¥–µ—Ä (–æ–¥–Ω–æ—á–∞—Å–Ω–∏–π SL/TP) —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ –±—ñ—Ä–∂—ñ, –∞ –≤ —Ä–∞–∑—ñ –Ω–µ–≤–¥–∞—á—ñ ‚Äî –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –∑–∞–ø–∞—Å–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é (–æ–∫—Ä–µ–º–∏–π —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø –∞–±–æ –ø—Ä–æ—Å—Ç–∏–π SL).
* **`trade_position.py`** ‚Äì –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –ø–æ–∑–∏—Ü—ñ–π. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–∫—Ç–∏–≤–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑ –±—ñ—Ä–∂–µ—é, –∑–±–µ—Ä—ñ–≥–∞—î —ó—Ö —É –∫–µ—à—ñ (`open_positions`) —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—é —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø—ñ–≤, –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –¥–æ—Å—è–≥–∞—î —Ç—Ä–∏–≥–µ—Ä–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è. –ó–∞–±–µ–∑–ø–µ—á—É—î, —â–æ –±–æ—Ç –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É—î –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π (`MAX_OPEN_POSITIONS`).
* **`exchange.py`** ‚Äì –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–ª—ñ—î–Ω—Ç –¥–ª—è –±—ñ—Ä–∂—ñ **OKX** (—á–µ—Ä–µ–∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É ccxt). –†–µ–∞–ª—ñ–∑—É—î –º–µ—Ç–æ–¥–∏ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –∑ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ (`safe_await`), –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É, –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤ —ñ OCO (–º–µ—Ç–æ–¥ `place_stop_loss_take_profit`). –¢–∞–∫–æ–∂ –∑–¥—ñ–π—Å–Ω—é—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–ª–µ—á–∞ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ —Ç–∞ –æ–±—Ä–æ–±–∫—É —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∏ OKX (—Ä–µ–∂–∏–º –º–∞—Ä–∂—ñ `isolated`, —Ñ–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –¥–ª—è OCO —Ç–æ—â–æ).
* **`indicators.py`** ‚Äì –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ —ñ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö –¥–ª—è ML-–º–æ–¥–µ–ª—ñ. –ú—ñ—Å—Ç–∏—Ç—å, –∑–æ–∫—Ä–µ–º–∞, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ ATR (–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å) –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–∞—Ä —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–∞–Ω—ñ—à–µ –Ω–∞–≤—á–µ–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π Random Forest (—Ñ–∞–π–ª–∏ –≤ `models/`) –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è/–ø–∞–¥—ñ–Ω–Ω—è.
* **`config.py`** ‚Äì –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–æ—Ç–∞. –í–∏–∑–Ω–∞—á–∞—î —Å–ø–∏—Å–æ–∫ **—Ç–æ—Ä–≥–æ–≤–∏—Ö –ø–∞—Ä**, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É —Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó: –∫—Ä–µ–¥–∏—Ç–Ω–µ –ø–ª–µ—á–µ (`LEVERAGE`), —á–∞—Å—Ç–∫—É –¥–µ–ø–æ–∑–∏—Ç—É –Ω–∞ —É–≥–æ–¥—É (`TRADE_MARGIN_RATIO`), –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –º–∞—Ä–∂—É –Ω–∞ —É–≥–æ–¥—É (`MIN_MARGIN_PER_TRADE`), –ø–æ—Ä–æ–≥–∏ –¥–ª—è —Å–∏–≥–Ω–∞–ª—ñ–≤ (`BUY_THRESHOLD`, `SELL_THRESHOLD`), –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å—Ç–æ–ø-–ª–æ—Å—ñ–≤ —ñ —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø—ñ–≤ —Ç–æ—â–æ. –¢–∞–∫–æ–∂ –º—ñ—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é `get_logger` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ —Ñ–∞–π–ª–∏.

**–ó–∞–≥–∞–ª—å–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞** –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

1. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ (`Trade.__init__` —É `trade.py`) –±–æ—Ç –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –±—ñ—Ä–∂—ñ (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `AsyncExchange`), –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–∞–¥–∞–Ω–µ –ø–ª–µ—á–µ –Ω–∞ –∫–æ–∂–Ω—É –ø–∞—Ä—É (—á–µ—Ä–µ–∑ `exchange.initialize()`), —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –æ–±‚Äô—î–∫—Ç–∏ –¥–ª—è —Å–∏–≥–Ω–∞–ª—ñ–≤, –ø–æ–∑–∏—Ü—ñ–π, —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ —ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –æ–¥—Ä–∞–∑—É –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —Ä–∏–Ω–∫–æ–≤—ñ –¥–∞–Ω—ñ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –∫—Ä–æ–∫—É, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ—Ä–¥–µ—Ä—É —Ç–æ—â–æ) –¥–ª—è –æ–±—Ä–∞–Ω–∏—Ö –ø–∞—Ä.
2. **–û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ `trade()` –≤ `trade.py` –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ (–∫–æ–∂–Ω—ñ `update_interval` —Å–µ–∫—É–Ω–¥, \~0.2—Å) –ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ —Å–ø–∏—Å–∫—É –ø–∞—Ä. –î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ –±–æ—Ç:

   * –û–Ω–æ–≤–ª—é—î **–∫–Ω–∏–≥—É –æ—Ä–¥–µ—Ä—ñ–≤** —Ç–∞ **–æ—Å—Ç–∞–Ω–Ω—ñ OHLCV** (—á–µ—Ä–µ–∑ `TradeSignalProcessor.process_pair`). –Ø–∫—â–æ –¥–∞–Ω—ñ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ ‚Äì –ø–∞—Ä–∞ —Ç–∏–º—á–∞—Å–æ–≤–æ –ø—Ä–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è.
   * –û–±—á–∏—Å–ª—é—î —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —ñ –æ—Ç—Ä–∏–º—É—î **–π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å** —Ä—É—Ö—É —Ü—ñ–Ω–∏ –≤–≥–æ—Ä—É/–≤–Ω–∏–∑ –∑ ML-–º–æ–¥–µ–ª—ñ. –ù–∞ –æ—Å–Ω–æ–≤—ñ —Ü–∏—Ö –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π —Ç–∞ –ø–æ—Ä–æ–≥—ñ–≤ `BUY_THRESHOLD` —ñ `SELL_THRESHOLD` –≤–∏–∑–Ω–∞—á–∞—î —Å–∏–≥–Ω–∞–ª: **–∫—É–ø—É–≤–∞—Ç–∏** (—è–∫—â–æ –º–æ–¥–µ–ª—å –¥–∞—î –≤–∏—Å–æ–∫—É –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å —Ä–æ—Å—Ç—É), **–ø—Ä–æ–¥–∞–≤–∞—Ç–∏** (–¥–ª—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø–∞–¥—ñ–Ω–Ω—è), –∞–±–æ –Ω–µ —Ç–æ—Ä–≥—É–≤–∞—Ç–∏.
   * –ü–µ—Ä–µ–≤—ñ—Ä—è—î –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —É–º–æ–≤–∏: —á–∏ –ø–∞—Ä–∞ –ø—Ä–æ–π—à–ª–∞ —Ñ—ñ–ª—å—Ç—Ä–∏ (–æ–±—Å—è–≥ —Ç–æ—Ä–≥—ñ–≤, —Å–ø—Ä–µ–¥, –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å ATR), —á–∏ –Ω–µ–º–∞—î –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç–æ—ó –ø–æ–∑–∏—Ü—ñ—ó –ø–æ —Ü—ñ–π –ø–∞—Ä—ñ, —ñ —á–∏ –Ω–µ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π.
   * **–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥–∏**: —è–∫—â–æ —Å–∏–≥–Ω–∞–ª ‚Äú–∫—É–ø–∏—Ç–∏‚Äù –∞–±–æ ‚Äú–ø—Ä–æ–¥–∞—Ç–∏‚Äù –≤–∞–ª—ñ–¥–Ω–∏–π, –±–æ—Ç —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –æ–±—Å—è–≥ —É–≥–æ–¥–∏. –£ `trade_core.open_trade()` –¥–ª—è —Ü—å–æ–≥–æ:

     * –ó–∞–ø–∏—Ç—É—î **–¥–æ—Å—Ç—É–ø–Ω—É –º–∞—Ä–∂—É** –Ω–∞ –∞–∫–∞—É–Ω—Ç—ñ (`exchange.get_available_margin()` ‚Äì –≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü–µ –≤—ñ–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å USDT).
     * –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –º–∞—Ä–∂—É –¥–ª—è —Ü—ñ—î—ó —É–≥–æ–¥–∏: `calculated_margin = max( available_margin * TRADE_MARGIN_RATIO, MIN_MARGIN_PER_TRADE )`. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `TRADE_MARGIN_RATIO = 0.3` (—Ç–æ–±—Ç–æ 30% –≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–æ—à—Ç—ñ–≤, –Ω–µ –º–µ–Ω—à–µ –Ω—ñ–∂ 0.01 USDT –Ω–∞ —É–≥–æ–¥—É).
     * –ù–∞ –æ—Å–Ω–æ–≤—ñ –º–∞—Ä–∂—ñ, —Ü—ñ–Ω–∏ —ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ä–∏–Ω–∫—É –≤–∏–∑–Ω–∞—á–∞—î **–∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–µ—Ç** –¥–ª—è –æ—Ä–¥–µ—Ä–∞. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ñ–æ—Ä–º—É–ª–∞:
       $amount = \frac{calculated\_margin \times LEVERAGE}{price}$
       —ñ –ø–æ—Ç—ñ–º –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –∫—Ä–æ–∫—É –ª–æ—Ç—É –±—ñ—Ä–∂—ñ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ 0.07895 ETH, –∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∫—Ä–æ–∫ ‚Äì 0.001 ETH, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—É–¥–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∞ –¥–æ 0.078 (–≤ –º–µ–Ω—à–∏–π –±—ñ–∫).
     * –Ø–∫—â–æ –ø—ñ—Å–ª—è –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞–¥—Ç–æ –º–∞–ª–∞ (0 –∞–±–æ –º–µ–Ω—à–µ –º—ñ–Ω—ñ–º—É–º—É –±—ñ—Ä–∂—ñ), —É–≥–æ–¥–∞ **—Å–∫–∞—Å–æ–≤—É—î—Ç—å—Å—è** (–ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è ‚ÄúInvalid amount, skipping trade‚Äù).
     * –í–∏–∑–Ω–∞—á–∞—î —Ä—ñ–≤–Ω—ñ **Stop-Loss** —ñ **Take-Profit** –¥–ª—è –ø–æ–∑–∏—Ü—ñ—ó –∑–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º –≤—ñ–¥—Å–æ—Ç–∫–æ–º –≤—ñ–¥ —Ü—ñ–Ω–∏ –≤—Ö–æ–¥—É. –í –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–∞–¥–∞–Ω–æ `FIXED_SL_PCT = 0.7` —Ç–∞ `FIXED_TP_PCT = 0.2` ‚Äì —Å—Ö–æ–∂–µ –Ω–∞ **0.7% —Å—Ç–æ–ø-–ª–æ—Å** —ñ **0.2% —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç** –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ—ó —Ü—ñ–Ω–∏ –¥–ª—è –ª–æ–Ω–≥—É (–¥–ª—è —à–æ—Ä—Ç—É ‚Äì –Ω–∞–≤–ø–∞–∫–∏). –¶—ñ —Ä—ñ–≤–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ª–∏—à–µ, —è–∫—â–æ —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø –Ω–µ —Å–ø—Ä–∞—Ü—é—î.
     * –û–±—á–∏—Å–ª—é—î **trigger price** –¥–ª—è —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø–∞, —è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ —Ä–µ–∂–∏–º `USE_BOTH_SL_TRAILING`. –¢—Ä–∏–≥–µ—Ä –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —è–∫, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 1% –≤—ñ–¥ —Ü—ñ–Ω–∏ –≤—Ö–æ–¥—É –≤ —Å—Ç–æ—Ä–æ–Ω—É –ø—Ä–∏–±—É—Ç–∫—É (–ø–∞—Ä–∞–º–µ—Ç—Ä `TRAILING_TRIGGER_RATIO` —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó).
     * –ß–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `exchange.place_order()` –Ω–∞–¥—Å–∏–ª–∞—î **—Ä–∏–Ω–∫–æ–≤–∏–π –æ—Ä–¥–µ—Ä** –Ω–∞ –±—ñ—Ä–∂—É –∑ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é. –¶–µ–π –º–µ—Ç–æ–¥ —Ç–∞–∫–æ–∂ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É –≤–∏—Å—Ç–∞–≤–∏—Ç–∏ OCO-–æ—Ä–¥–µ—Ä (—Å—Ç–æ–ø-–ª–æ—Å + —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç) —á–µ—Ä–µ–∑ API –±—ñ—Ä–∂—ñ OKX. –Ø–∫—â–æ OCO –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∞–±–æ –Ω–µ –≤–¥–∞—Å—Ç—å—Å—è ‚Äì `exchange.place_order` –ø–æ–≤–µ—Ä–Ω–µ –ª–∏—à–µ –≤–∏–∫–æ–Ω–∞–Ω–∏–π –æ—Ä–¥–µ—Ä –≤—Ö–æ–¥—É.
   * –Ø–∫—â–æ –æ—Ä–¥–µ—Ä —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤—Å—è, –±–æ—Ç –ª–æ–≥—É—î —Ü–µ —ñ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞—Ö–∏—Å–Ω–∏—Ö –æ—Ä–¥–µ—Ä—ñ–≤: –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `TradeOrderManager.set_exit_orders()`. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è:

     * –Ø–∫—â–æ OCO –≤–∂–µ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ –µ—Ç–∞–ø—ñ `place_order`, —Ç–æ `set_exit_orders` –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏–º–µ (–∞–±–æ –æ–¥—Ä–∞–∑—É –ø–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó).
     * –Ü–Ω–∞–∫—à–µ ‚Äì —Å–ø—Ä–æ–±—É—î —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –≤–∏—Å—Ç–∞–≤–∏—Ç–∏ OCO —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `exchange.place_stop_loss_take_profit()`. –Ø–∫—â–æ —Ç–æ–π –ø–æ–≤–µ—Ä–Ω–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä (–æ–∑–Ω–∞—á–∞—î, —â–æ OCO —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ), –∑–∞—Ñ—ñ–∫—Å—É—î —Ü–µ –≤ –ª–æ–≥–∞—Ö.
     * –Ø–∫—â–æ —ñ —Ü–µ –Ω–µ –≤–¥–∞–ª–æ—Å—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, API –Ω–µ –ø—Ä–∏–π–Ω—è–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏) ‚Äì –≤–¥–∞—î—Ç—å—Å—è –¥–æ **Fallback**: —è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ `USE_EXCHANGE_TRAILING = True`, –∑–∞–º—ñ—Å—Ç—å —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ SL —Å—Ç–∞–≤–∏—Ç—å **—Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø** –æ—Ä–¥–µ—Ä (`TradeOrderManager.place_trailing_order()`), –∞–±–æ –∂, —è–∫—â–æ —Ç—Ä–µ–π–ª—ñ–Ω–≥ –≤–∏–º–∫–Ω–µ–Ω–∏–π, —Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–∏–π —Å—Ç–æ–ø-–ª–æ—Å –Ω–∞ –±—ñ—Ä–∂—ñ (`place_stop_loss_order()`).
   * **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü—ñ–π**: –≤—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ —Å–ª–æ–≤–Ω–∏–∫ `position_metadata` –∑ —É—Å—ñ–º–∞ –¥–µ—Ç–∞–ª—è–º–∏ (—Ü—ñ–Ω–∞ –≤—Ö–æ–¥—É, –∫—ñ–ª—å–∫—ñ—Å—Ç—å, —Å—Ç–æ—Ä–æ–Ω–∞, —Ç—Ä–∏–≥–µ—Ä–Ω–∏–π —Ä—ñ–≤–µ–Ω—å –¥–ª—è —Ç—Ä–µ–π–ª—ñ–Ω–≥—É —ñ —Ç.–¥.). –Ü–Ω—à–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å (`TradePositionManager.refresh_positions()`, –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ) —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î —Å—Ç–∞–Ω –ø–æ–∑–∏—Ü—ñ–π –∑ –±—ñ—Ä–∂–µ—é —ñ –ø—Ä–∏–±–∏—Ä–∞—î –∑–∞–∫—Ä–∏—Ç—ñ. –¢–∞–∫–æ–∂ –º–µ—Ç–æ–¥ `check_trailing_activation()` –≤—ñ–¥—Å—Ç–µ–∂—É—î, –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –¥–æ—Å—è–≥–∞—î —Ç—Ä–∏–≥–µ—Ä–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è, —ñ —Ç–æ–¥—ñ –ø–æ–∑–Ω–∞—á–∞—î —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø —è–∫ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π (–ø—ñ—Å–ª—è —á–æ–≥–æ –±—ñ—Ä–∂–∞ —Å–∞–º–∞ –≤–µ–¥–µ —Å—Ç–æ–ø –∑–∞ —Ü—ñ–Ω–æ—é).
   * **–í–∏—Ö—ñ–¥ –∑ —É–≥–æ–¥–∏**: –∫–æ–ª–∏ –±—ñ—Ä–∂–∞ –≤–∏–∫–æ–Ω–∞—î –∞–±–æ —Å—Ç–æ–ø-–ª–æ—Å, –∞–±–æ —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç, –ø–æ–∑–∏—Ü—ñ—è –∑–∞–∫—Ä–∏—î—Ç—å—Å—è ‚Äì —Ü–µ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —É `exchange.sync_positions()` —è–∫ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó. –ë–æ—Ç –∑–∞–ª–æ–≥—É—î –ø—Ä–∏–±—É—Ç–æ–∫/–∑–±–∏—Ç–æ–∫ —ñ –∑–≤—ñ–ª—å–Ω–∏—Ç—å —á–∞—Å—Ç–∫—É –±–∞–ª–∞–Ω—Å—É, —â–æ –±—É–ª–∞ –≤ –º–∞—Ä–∂—ñ, –ø—ñ—Å–ª—è —á–æ–≥–æ —Å—Ç–∞–Ω–µ –≥–æ—Ç–æ–≤–∏–º –¥–æ –Ω–æ–≤–∏—Ö —É–≥–æ–¥ –Ω–∞ —Ü—é —Å—É–º—É.

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –æ—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª –±–æ—Ç–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ—Å—Ç—ñ–π–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ —Ä–∏–Ω–∫—É —ñ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–æ–∑–∏—Ü—ñ–π, –ø—Ä–∏ —Ü—å–æ–º—É —Ä–∏–∑–∏–∫ –∫–æ–∂–Ω–æ—ó –ø–æ–∑–∏—Ü—ñ—ó –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç—å—Å—è —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—é —á–∞—Å—Ç–∫–æ—é –¥–µ–ø–æ —ñ –∑–∞—Ö–∏—Å–Ω–∏–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏.

# ‚ö†Ô∏è –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –±–∞–≥–∏

–ù–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É –∫–æ–¥—É —Ç–∞ –ª–æ–≥—ñ–≤, –≤ —Ä–æ–±–æ—Ç—ñ –±–æ—Ç–∞ –∑–Ω–∞–π–¥–µ–Ω–æ –∫—ñ–ª—å–∫–∞ **–ª–æ–≥—ñ—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫** —ñ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –±–∞–≥—ñ–≤, –æ—Å–æ–±–ª–∏–≤–æ –ø–æ–≤‚Äô—è–∑–∞–Ω–∏—Ö –∑ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–º —Å—É–º —É–≥–æ–¥ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—î—é –∑ API –±—ñ—Ä–∂—ñ:

## 1. –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ—Ä–¥–µ—Ä–∞

**–Ø–∫ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:** –±–æ—Ç —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–µ—Ç –¥–ª—è –∫—É–ø—ñ–≤–ª—ñ/–ø—Ä–æ–¥–∞–∂—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–æ—Å—Ç—É–ø–Ω–æ—ó –º–∞—Ä–∂—ñ —Ç–∞ —Ü—ñ–Ω–∏, –∞ –ø–æ—Ç—ñ–º **–æ–∫—Ä—É–≥–ª—é—î** —Ü—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å **–≤ –º–µ–Ω—à–∏–π –±—ñ–∫ –¥–æ –∫—Ä–æ–∫—É –ª–æ—Ç—É** (`lot_size`). –¶–µ –≤–∏–¥–Ω–æ —É —Ñ—É–Ω–∫—Ü—ñ—ó `TradeCore.calculate_amount_from_margin()`:

```python
raw_amount = (margin * LEVERAGE) / price  
amount = math.floor(raw_amount / lot_size) * lot_size  
```

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–∂–¥–∏ –æ–∫—Ä—É–≥–ª—é—î—Ç—å—Å—è –≤–Ω–∏–∑ –¥–æ –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è. –¶–µ —É–±–µ–∑–ø–µ—á—É—î –≤—ñ–¥ –ø–æ–º–∏–ª–∫–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ—ó –º–∞—Ä–∂—ñ, –∞–ª–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç–∏ –¥–æ –Ω–µ–¥–æ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ —ñ –¥—Ä—ñ–±–Ω–∏—Ö –∑–∞–ª–∏—à–∫—ñ–≤.

**–ü—Ä–æ–±–ª–µ–º–∞:** —è–∫—â–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–µ–Ω—à–∞ –∑–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—É –±—ñ—Ä–∂–µ—é, –æ—Ä–¥–µ—Ä –Ω–µ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è. –£ –∫–æ–¥—ñ —Ü–µ —á–∞—Å—Ç–∫–æ–≤–æ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ –Ω–∞ –¥–≤–æ—Ö –µ—Ç–∞–ø–∞—Ö, –∞–ª–µ —î –ª–æ–≥—ñ–∫–∞, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏:

* `trade_core.open_trade()` –≤–∂–µ **–ø–µ—Ä–µ–≤—ñ—Ä—è—î**, —á–∏ –æ—Ç—Ä–∏–º–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å `amount` > 0. –Ø–∫—â–æ –Ω—ñ –∞–±–æ `amount` –≤—ñ–¥—Å—É—Ç–Ω—è, –±–æ—Ç –ª–æ–≥—É—î ‚ÄúInvalid amount, skipping trade‚Äù —ñ –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —É–≥–æ–¥—É. –ê–ª–µ —Ç—É—Ç –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–æ—Ç—ñ–æ–Ω–∞–ª (–≤–∞—Ä—Ç—ñ—Å—Ç—å –æ—Ä–¥–µ—Ä–∞) ‚Äì —Ç—ñ–ª—å–∫–∏ —Ç–µ, —â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ –Ω—É–ª—å–æ–≤–∞.
* –î–æ–¥–∞—Ç–∫–æ–≤–æ –≤ `exchange.place_order()` –¥—É–±–ª—é—î—Ç—å—Å—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫: —Ç–∞–º –∑–Ω–æ–≤ –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è `amount = (margin/price) * leverage` —ñ –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –∑ `min_amount` —Ç–∞ `min_notional` –∑ –¥–∞–Ω–∏—Ö –±—ñ—Ä–∂—ñ. –Ø–∫—â–æ `amount < min_amount`, –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä–Ω–µ –ø–æ–º–∏–ª–∫—É (‚ÄúCalculated amount ... is below minimum ..., skipping‚Äù). –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –æ—Ä–¥–µ—Ä –Ω–µ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ `trade_core` –≤–≤–∞–∂–∞–≤ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∞–ª—ñ–¥–Ω–æ—é.

–ß–µ—Ä–µ–∑ —Ü–µ –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–∞—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—ó, –¥–µ **–±–æ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—î —É–≥–æ–¥–∏ –Ω–∞ –¥–æ—Ä–æ–≥–∏—Ö –∞–∫—Ç–∏–≤–∞—Ö –ø—Ä–∏ –º–∞–ª–æ–º—É –¥–µ–ø–æ–∑–∏—Ç—ñ**:

* –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è **BTC** –∞–±–æ **ETH** —Ü—ñ–Ω–∞ –≤–∏—Å–æ–∫–∞, —ñ 30% –≤—ñ–¥ –¥—É–∂–µ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –¥–µ–ø–æ –º–æ–∂–µ –¥–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –Ω–∏–∂—á—É –º—ñ–Ω—ñ–º—É–º—É. –ë–æ—Ç —Å–ø—Ä–æ–±—É—î —ó—ó –≤—ñ–¥–∫—Ä–∏—Ç–∏, –∞–ª–µ –±—ñ—Ä–∂–∞ –≤—ñ–¥—Ö–∏–ª–∏—Ç—å —á–µ—Ä–µ–∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ª–æ—Ç –∞–±–æ –Ω–æ—Ç—ñ–æ–Ω–∞–ª ‚Äì —Ü–µ –≤–∏–¥–Ω–æ —É –ª–æ–≥–∞—Ö —è–∫ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å.
* –í –ª–æ–≥–∞—Ö (—Ñ–∞–π–ª `trade.log`) –º–æ–∂–ª–∏–≤–æ –∑–Ω–∞–π—Ç–∏ —Ç–∞–∫—ñ –≤–∏–ø–∞–¥–∫–∏: –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –∫—à—Ç–∞–ª—Ç ‚Äú\[Symbol] Calculated amount 0.0005 is below minimum 0.001, skipping‚Äù. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –¥–ª—è —Å–∏–º–≤–æ–ª—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å 0.001, –∞ –±–æ—Ç —Ä–æ–∑—Ä–∞—Ö—É–≤–∞–≤ 0.0005, —Ç–æ–º—É —É–≥–æ–¥—É —Å–∫–∞—Å–æ–≤–∞–Ω–æ. –¢–∞–∫—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó –æ—Å–æ–±–ª–∏–≤–æ –π–º–æ–≤—ñ—Ä–Ω—ñ –¥–ª—è **ETH**, —è–∫—â–æ –¥–µ–ø–æ–∑–∏—Ç \~\$10: 30% –º–∞—Ä–∂—ñ = \$3, –∑ –ø–ª–µ—á–µ–º 50 —Ü–µ –ø–æ–∑–∏—Ü—ñ—è –Ω–∞ \$150, —Ç–æ–±—Ç–æ \~0.08 ETH. –Ø–∫—â–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∫—Ä–æ–∫ 0.001, —Ç–æ 0.08 ‚Äì –≤–∞–ª—ñ–¥–Ω–æ. –ê–ª–µ —è–∫—â–æ –¥–µ–ø–æ–∑–∏—Ç —â–µ –º–µ–Ω—à–∏–π –∞–±–æ `TRADE_MARGIN_RATIO` –±—É–≤ –±–∏ 0.008 (0.8%), —Ç–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–∂–µ –≤–ø–∞—Å—Ç–∏ –Ω–∏–∂—á–µ –º—ñ–Ω—ñ–º—É–º—É.
* –ë–∞—á–∏–º–æ, —â–æ –∑–∞—Ä–∞–∑ –ª–æ–≥—ñ–∫–∞ **–ø–æ–¥–≤—ñ–π–Ω–æ–≥–æ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è** —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ —Ä–æ–∑–∫–∏–¥–∞–Ω–∞ –º—ñ–∂ `trade_core` —ñ `exchange`. –¶–µ —É—Å–∫–ª–∞–¥–Ω—é—î –¥–µ–±–∞–≥ —Ç–∞ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ—É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `trade_core` –º—ñ–≥ –±–∏ —Å–∞–º –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ `min_amount` —ñ `min_notional` –¥–æ –≤–∏–∫–ª–∏–∫—É `exchange.place_order`, —â–æ–± –Ω–µ —Ä–æ–±–∏—Ç–∏ –∑–∞–π–≤–∏–π –≤–∏–∫–ª–∏–∫).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
üëâ *–û–±‚Äô—î–¥–Ω–∞—Ç–∏ –ª–æ–≥—ñ–∫—É —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –º—ñ–Ω—ñ–º—É–º—ñ–≤ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.* –ë–∞–∂–∞–Ω–æ —Ä–æ–±–∏—Ç–∏ —Ü–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —É `TradeCore` –¥–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ—Ä–¥–µ—Ä–∞. –ú–æ–∂–Ω–∞ –∑–∞–ø–∏—Ç–∞—Ç–∏ `market_info` (—â–æ –≤–∂–µ —Ä–æ–±–∏—Ç—å—Å—è) —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `min_notional` —Ç–∞ `lot_size` –ø—Ä—è–º–æ –≤ `open_trade`:

* –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ **–º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å –æ—Ä–¥–µ—Ä–∞**: —è–∫—â–æ `calculated_margin * LEVERAGE < market_info['min_notional']`, —Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç–∏ —É–≥–æ–¥—É –æ–¥—Ä–∞–∑—É, —â–æ–± –Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ API.
* –û–∫—Ä—É–≥–ª—é–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ —ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —ó—ó —É `exchange.place_order` –∑–∞–º—ñ—Å—Ç—å –º–∞—Ä–∂—ñ. –ó–∞—Ä–∞–∑ `place_order` –ø—Ä–∏–π–º–∞—î `margin` —ñ –æ–±—á–∏—Å–ª—é—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∞–º ‚Äì –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏, —â–æ–± –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Ç—É–¥–∏ –≤–∂–µ –≥–æ—Ç–æ–≤—É `amount`. –¶–µ —Å–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥ —Ç–∞ —É—Å—É–Ω–µ **–ø–æ–¥–≤—ñ–π–Ω–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è**.
* –Ø–∫—â–æ –≤—Å–µ –∂ —Ö–æ—á–µ—Ç–µ –∑–∞–ª–∏—à–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –±–æ—Ü—ñ `exchange.place_order`, —Ç–æ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ –ø—Ä–∏ —É—Å–ø—ñ—à–Ω–æ–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ OCO-–æ—Ä–¥–µ—Ä—ñ–≤ —Ç–∞–º, –≤–∞—Ä—Ç–æ **–Ω–µ –¥—É–±–ª—é–≤–∞—Ç–∏** —ó—Ö —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ `trade_orders.set_exit_orders` (–ø—Ä–æ —Ü–µ ‚Äî –¥–∞–ª—ñ).

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ —Ü–∏—Ö –∑–º—ñ–Ω –±–æ—Ç —Ç–æ—á–Ω—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ –Ω–∞—è–≤–Ω–∏–π –¥–µ–ø–æ–∑–∏—Ç —ñ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç–∏–º–µ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –≤–∏–≥—ñ–¥–Ω—ñ —É–≥–æ–¥–∏ —á–µ—Ä–µ–∑ –∑–∞–π–≤–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è —á–∏ –¥—Ä—É–≥—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É.

## 2. –ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —á–∞—Å—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º

**–Ø–∫ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:** –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–∞–¥–∞–Ω–æ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç `TRADE_MARGIN_RATIO = 0.3`. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –±–æ—Ç –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **30% –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç—É** (–≤ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ–º—É –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç—ñ) –Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –Ω–æ–≤–æ—ó –ø–æ–∑–∏—Ü—ñ—ó. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–∞—é—á–∏ \$100 –≤—ñ–ª—å–Ω–æ, –Ω–∞ —É–≥–æ–¥—É –ø—ñ–¥–µ \$30 –º–∞—Ä–∂—ñ (—ñ –∑ –ø–ª–µ—á–µ–º 50 —Ü–µ –ø–æ–∑–∏—Ü—ñ—è –Ω–∞ \~\$1500). –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –º–∞—Ä–∂–∞ `MIN_MARGIN_PER_TRADE = 0.01 USDT` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –¥—É–∂–µ –º–∞–ª–æ–º—É –±–∞–ª–∞–Ω—Å—ñ –±–æ—Ç —Å–ø—Ä–æ–±—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ö–æ—á–∞ –± 0.01 USDT.

**–ü—Ä–æ–±–ª–µ–º–∞:** —Å—É–¥—è—á–∏ –∑ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∏—Ç–∞–Ω–Ω—è, –æ—á—ñ–∫—É–≤–∞–ª–æ—Å—å —ñ–Ω—à–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Äì **–º–æ–∂–ª–∏–≤–æ, 0.8% –¥–µ–ø–æ–∑–∏—Ç—É –Ω–∞ —É–≥–æ–¥—É** (—è–∫ –∑–≥–∞–¥–∞–Ω–æ ‚Äú0.8% –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –∞–ª—å—Ç–∫–æ—ó–Ω—ñ–≤‚Äù). –£ –∫–æ–¥—ñ —î –ø–∞—Ä–∞–º–µ—Ç—Ä `TRAILING_SL_PERCENT = 0.008` (0.8%) –¥–ª—è —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø–∞, —è–∫–∏–π –º—ñ–≥ –±—É—Ç–∏ –ø–µ—Ä–µ–ø–ª—É—Ç–∞–Ω–∏–π —ñ–∑ —á–∞—Å—Ç–∫–æ—é –¥–µ–ø–æ–∑–∏—Ç—É. –Ø–∫—â–æ –ø–ª–∞–Ω—É–≤–∞–ª–æ—Å—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **0.8% –≤—ñ–¥ –¥–µ–ø–æ–∑–∏—Ç—É –Ω–∞ —É–≥–æ–¥—É**, —Ç–æ –∑–∞—Ä–∞–∑ —Ü–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ ‚Äì —Å—Ç–æ—ó—Ç—å 30%. –¶–µ –≤–µ–ª–∏—á–µ–∑–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è —É —Ä—ñ–≤–Ω—ñ —Ä–∏–∑–∏–∫—É.

–ö—Ä—ñ–º —Ç–æ–≥–æ, –ø–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ **–Ω–∞–¥–º—ñ—Ä–Ω–æ —á–∞—Å—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –Ω–∞ –¥–æ—Ä–æ–≥—ñ –∞–∫—Ç–∏–≤–∏**:

* –î–ª—è –¥–µ—à–µ–≤—à–∏—Ö –∞–ª—å—Ç—ñ–≤ 30% ‚Äì –º–æ–∂–ª–∏–≤–æ –æ–∫, –∞–ª–µ –¥–ª—è **ETH** —á–∏ **BTC** –æ–¥–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è –º–æ–∂–µ –∑‚Äô—ó—Å—Ç–∏ –±—ñ–ª—å—à—É —á–∞—Å—Ç–∏–Ω—É –¥–µ–ø–æ–∑–∏—Ç—É —á–µ—Ä–µ–∑ –≤–∏—Å–æ–∫—É —Ü—ñ–Ω—É (–Ω–∞–≤—ñ—Ç—å –∑ –ø–ª–µ—á–µ–º). –Ø–∫—â–æ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–æ 3 –ø–æ–∑–∏—Ü—ñ—ó (MAX\_OPEN\_POSITIONS), –ø—Ä–∏ 30% –∫–æ–∂–Ω–∞ ‚Äì —Å—É–º–∞—Ä–Ω–æ 90% –¥–µ–ø–æ–∑–∏—Ç—É –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ. –¶–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∞–≥—Ä–µ—Å–∏–≤–Ω—ñ–π —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó, –∞–ª–µ —Ç—Ä–µ–±–∞ –≤–ø–µ–≤–Ω–∏—Ç–∏—Å—å, —â–æ —Ü–µ –±–∞–∂–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞.
* –ó —ñ–Ω—à–æ–≥–æ –±–æ–∫—É, —è–∫—â–æ –∑–∞–¥—É–º –±—É–≤ 0.8% –Ω–∞ —É–≥–æ–¥—É (–±–µ–∑–ø–µ—á–Ω—ñ—à–µ –¥–ª—è –º–∞–ª–æ–≥–æ –¥–µ–ø–æ), —Ç–æ –≤–∞—Ä—Ç–æ –∑–º—ñ–Ω–∏—Ç–∏ `TRADE_MARGIN_RATIO` –Ω–∞ 0.008. **–ó–∞—Ä–∞–∑ —Ü–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç–æ—ó—Ç—å 0.3**, —ñ —Ü–µ, –π–º–æ–≤—ñ—Ä–Ω–æ, –ø–æ–º–∏–ª–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–±–æ –Ω–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
üëâ *–£—Ç–æ—á–Ω–∏—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É.* –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∞–º–µ 0.8% –≤—ñ–¥ –¥–µ–ø–æ–∑–∏—Ç—É –Ω–∞ —Ç—Ä–µ–π–¥, –≤–∞—Ä—Ç–æ:

* –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `TRADE_MARGIN_RATIO = 0.008` (–∞–±–æ —ñ–Ω—à–µ –±–∞–∂–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è). –¢–∞–∫ –±–æ—Ç –±—Ä–∞—Ç–∏–º–µ –∑–Ω–∞—á–Ω–æ –º–µ–Ω—à—É —á–∞—Å—Ç–∫—É –±–∞–ª–∞–Ω—Å—É –≤ –∫–æ–∂–Ω—É —É–≥–æ–¥—É.
* –ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É –∞–±–æ –¥–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–ª—è —è—Å–Ω–æ—Å—Ç—ñ, —â–æ–± –Ω–µ –ø–ª—É—Ç–∞—Ç–∏ —ó—ó –∑ –≤—ñ–¥—Å–æ—Ç–∫–æ–º –¥–ª—è —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞–∑–≤–∞—Ç–∏ `TRADE_MARGIN_RATIO` —è–∫ `DEPOSIT_PERCENT_PER_TRADE`.
* –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∏ —Ç–∞–∫–æ–º—É –Ω–∏–∑—å–∫–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—ñ –Ω–µ —Å—Ç–∞–Ω–µ **–∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª–æ—é —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∞ –º–∞—Ä–∂–∞**, —â–æ–± –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –ø–æ–∑–∏—Ü—ñ—ó. –ú–æ–∂–ª–∏–≤–æ, –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø—ñ–¥–Ω—è—Ç–∏ `MIN_MARGIN_PER_TRADE` ‚Äì —Å–∫–∞–∂—ñ–º–æ, –¥–æ 1 USDT ‚Äì —â–æ–± –±–æ—Ç —Ö–æ—á–∞ –± –Ω–∞–∫–æ–ø–∏—á—É–≤–∞–≤ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –±–∞–ª–∞–Ω—Å—É, –ø–µ—Ä—à –Ω—ñ–∂ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —É–≥–æ–¥—É. –ó–∞–Ω–∞–¥—Ç–æ —á–∞—Å—Ç—ñ —É–≥–æ–¥–∏ –Ω–∞ –∫–æ–ø—ñ–π—á–∞–Ω—ñ —Å—É–º–∏ –º–æ–∂—É—Ç—å –∑‚Äô—ó–¥–∞—Ç–∏ –∫–æ–º—ñ—Å—ñ—é —ñ –Ω–µ –¥–∞–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å—É –¥–µ–ø–æ–∑–∏—Ç—É.

–¢–∞–∫–æ–∂ –∑–∞—É–≤–∞–∂–∏–º–æ: **–≤ –ª–æ–≥–∞—Ö –¥–ª—è ETH** –≤–∏ –º–æ–≥–ª–∏ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏, —â–æ —Ñ–∞–∫—Ç–∏—á–Ω–æ –±–æ—Ç –±—Ä–∞–≤ –Ω–µ —Ç—É —á–∞—Å—Ç–∫—É, —â–æ –æ—á—ñ–∫—É–≤–∞–ª–æ—Å—å. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –ø–ª–∞–Ω—É–≤–∞–ª–æ—Å—å 0.8%, –∞ –±—Ä–∞–ª–æ—Å—è 30%, —Ü–µ —è–≤–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∞ –Ω–µ—Ç–æ—á–Ω—ñ—Å—Ç—å. –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤–∞—Ä—Ç–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –ø—Ä–æ–≥–æ–Ω–∏ —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å, —â–æ –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö –ª–æ–≥—ñ–≤ –ø—Ä–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–æ–∑–∏—Ü—ñ—ó —Å—É–º–∞ –º–∞—Ä–∂—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞–¥—É–º—É.

## 3. –ú–æ–∂–ª–∏–≤–∞ –ø–æ–¥–≤—ñ–π–Ω–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–æ–ø-–Ω–∞–∫–∞–∑—ñ–≤ (SL/TP) —ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ API OKX

**–Ø–∫ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:** –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–æ–∑–∏—Ü—ñ—ó –±–æ—Ç –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞—Ö–∏—Å–Ω—ñ –æ—Ä–¥–µ—Ä–∏ –¥–≤—ñ—á—ñ, –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –¥—É–±–ª—é—é—á–∏ –∑—É—Å–∏–ª–ª—è:

* –ú–µ—Ç–æ–¥ `exchange.place_order()` –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ `stop_price` —ñ `take_price`. –£ –≤–µ—Ä—Å—ñ—ó 1.10.6 (–∑–≥—ñ–¥–Ω–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—è –≤ –∫–æ–¥—ñ) –¥–æ–¥–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ OCO-–æ—Ä–¥–µ—Ä—ñ–≤: —Ç–æ–±—Ç–æ **`place_order` –ø—Ä—è–º–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤–∏–∫–ª–∏–∫–∞—î** `place_stop_loss_take_profit` –¥–ª—è –±—ñ—Ä–∂—ñ OKX. –¶–µ–π –º–µ—Ç–æ–¥ —Ñ–æ—Ä–º—É—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç `private_post_trade_order_algo` –∑ —Ç–∏–ø–æ–º `ordType: "oco"` —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `tpTriggerPx`, `slTriggerPx` —Ç–æ—â–æ. –Ø–∫—â–æ –±—ñ—Ä–∂–∞ –ø—Ä–∏–π–º–µ —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —Å—Ç–æ–ø-–ª–æ—Å —ñ —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç –±—É–¥—É—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ *–æ–¥–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º* —Ä–∞–∑–æ–º —ñ–∑ –æ—Å–Ω–æ–≤–Ω–∏–º –æ—Ä–¥–µ—Ä–æ–º.
* –ù–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ü—å–æ–≥–æ, –ø—ñ—Å–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤ `trade_core.open_trade()` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `order_manager.set_exit_orders()`, —è–∫–∞ **–∑–Ω–æ–≤—É** —Å–ø—Ä–æ–±—É—î –≤–∏—Å—Ç–∞–≤–∏—Ç–∏ OCO: –≤–æ–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—î `exchange.place_stop_loss_take_profit` (—â–µ –æ–¥–∏–Ω —Ä–∞–∑) –∞–±–æ —Ç—Ä–µ–π–ª—ñ–Ω–≥.

**–ü—Ä–æ–±–ª–µ–º–∞:** —î —Ä–∏–∑–∏–∫, —â–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–ª–∏–∫—É OCO (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `place_order`) –±—ñ—Ä–∂–∞ OKX —É–∂–µ —Å—Ç–≤–æ—Ä–∏–ª–∞ —Å—Ç–æ–ø-–æ—Ä–¥–µ—Ä–∏. –î—Ä—É–≥–∏–π –≤–∏–∫–ª–∏–∫ –º–æ–∂–µ –∞–±–æ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É**, –∞–±–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥—É–±–ª—å –æ—Ä–¥–µ—Ä—ñ–≤. –°—É–¥—è—á–∏ –∑ –∫–æ–¥—É, `exchange.place_order` –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É `algo_ids` –∑ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞–º–∏ –æ—Ä–¥–µ—Ä—ñ–≤, –∞–ª–µ —Ü—ñ `algo_ids` –Ω—ñ—è–∫ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è, —â–æ–± –ø—Ä–∏–ø–∏–Ω–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—É —É—Å—Ç–∞–Ω–æ–≤–∫—É.

–ú–æ–∂–ª–∏–≤—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏:

* **–ü–æ–º–∏–ª–∫–∞ API**: OKX –º–æ–∂–µ –≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –¥—Ä—É–≥–∏–π –∑–∞–ø–∏—Ç OCO, –±–æ –¥–ª—è –ø–æ–∑–∏—Ü—ñ—ó –≤–∂–µ —ñ—Å–Ω—É—é—Ç—å —Ç–∞–∫—ñ –æ—Ä–¥–µ—Ä–∏. –õ–æ–≥–∏ –º–æ–≥–ª–∏ —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –≤ `set_exit_orders`: –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `[EXIT_ORDERS] Invalid SL/TP params ... skipping` –∞–±–æ —â–æ—Å—å —Å—Ö–æ–∂–µ, —è–∫—â–æ –±–æ—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —ñ –±–∞—á–∏—Ç—å, —â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å = 0 –∞–±–æ —Ü—ñ–Ω–∞ = None (–æ–∑–Ω–∞–∫–∞, —â–æ –≤–∂–µ –∑–∞–∫—Ä–∏—Ç–æ).
* **–î—É–±–ª—é–≤–∞–Ω–Ω—è —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø–∞**: —è–∫—â–æ –ø–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç –Ω–µ –≤–¥–∞–≤—Å—è —ñ `algo_ids` –ø–æ—Ä–æ–∂–Ω—ñ–π, —Ç–æ–¥—ñ –æ–±–∏–¥–≤–∞ —Ä–∞–∑–∏ –Ω–µ –∑–∞—à–∫–æ–¥—è—Ç—å (–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä—à–∏–π –Ω—ñ—á–æ–≥–æ –Ω–µ –∑—Ä–æ–±–∏–≤, –¥—Ä—É–≥–∏–π —Å–ø—Ä–æ–±—É—î). –ê–ª–µ —è–∫—â–æ –ø–µ—Ä—à–∏–π —á–∞—Å—Ç–∫–æ–≤–æ –≤–¥–∞–≤—Å—è, –∞ –¥—Ä—É–≥–∏–π –≤–∏—Ä—ñ—à–∏–≤ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø, –º–æ–∂–µ —Å—Ç–∞—Ç–∏—Å—å, —â–æ –∑–∞–º—ñ—Å—Ç—å –æ—á—ñ–∫—É–≤–∞–Ω–æ–≥–æ OCO —É –≤–∞—Å –±—É–¥–µ —Ç—ñ–ª—å–∫–∏ —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø –±–µ–∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç—É.
* **–ó–∞–π–≤–∏–π –∫–æ–¥**: –∑—Ä–µ—à—Ç–æ—é, –ø–æ–¥–≤—ñ–π–Ω–∞ —Å–ø—Ä–æ–±–∞ —É—Å–∫–ª–∞–¥–Ω—é—î –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏. –ö—Ä–∞—â–µ, —â–æ–± OCO —Å—Ç–∞–≤–∏–≤—Å—è **–∞–±–æ** –Ω–∞ –µ—Ç–∞–ø—ñ `place_order`, **–∞–±–æ** –≤–∂–µ –ø—ñ—Å–ª—è, –∞–ª–µ –Ω–µ –æ–±–∏–¥–≤–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
üëâ *–£–ø–æ—Ä—è–¥–∫—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è SL/TP.* –Ñ –¥–≤–∞ –ø—ñ–¥—Ö–æ–¥–∏:

1. **–î–æ–≤—ñ—Ä–∏—Ç–∏ –±—ñ—Ä–∂—ñ OCO:** –Ω–µ—Ö–∞–π `exchange.place_order` —Ä–æ–±–∏—Ç—å –≤—Å–µ (–æ—Å–Ω–æ–≤–Ω–∏–π –æ—Ä–¥–µ—Ä + OCO). –¢–æ–¥—ñ –≤ `trade_core.open_trade()` –ø—ñ—Å–ª—è `place_order` —Ç—Ä–µ–±–∞ **–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏** —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –Ø–∫—â–æ `entry_order` –≤–∏–∫–æ–Ω–∞–Ω–∏–π **—ñ** `algo_ids` –ø–æ–≤–µ—Ä–Ω—É–≤—Å—è (—Ç–æ–±—Ç–æ OCO —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ), –º–æ–∂–Ω–∞ **–Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏** `set_exit_orders` –≤–∑–∞–≥–∞–ª—ñ. –¢—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

   ```python
   entry_order, stop_price, take_price, amount, algo_ids = await self.exchange.place_order(...)  
   if entry_order is None: ...  
   if algo_ids.get('stop_loss'):  
       self.logger.info(f"OCO –æ—Ä–¥–µ—Ä–∏ –¥–ª—è {symbol} –≤–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –±—ñ—Ä–∂–µ—é.")  
   else:  
       await self.order_manager.set_exit_orders(...)
   ```

   –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∑—É—Å–∏–ª—å –Ω–µ –±—É–¥–µ.
2. **–ê–±–æ –Ω–∞–≤–ø–∞–∫–∏ ‚Äì —Ä–æ–±–∏—Ç–∏ OCO —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ:** —Ç–æ–¥—ñ –≤–∏–∫–ª–∏–∫ `place_stop_loss_take_profit` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `place_order` –≤–∞—Ä—Ç–æ **–≤—ñ–¥–∫–ª—é—á–∏—Ç–∏** (–Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Ç—É–¥–∏ `stop_price`/`take_price`, –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–∞–ø–æ—Ä). –ù–µ—Ö–∞–π `exchange.place_order` –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î –≤–∏–∫–æ–Ω–∞–Ω–∏–π –æ—Ä–¥–µ—Ä, –∞ —É—Å—ñ–º, —â–æ —Å—Ç–æ—Å—É—î—Ç—å—Å—è SL/TP, –∑–∞–π–º–∞—î—Ç—å—Å—è `trade_orders.set_exit_orders`. –¶–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç –¥–∞—î –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é –Ω–∞ –±–æ—Ü—ñ –±–æ—Ç–∞ (–º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—É –ª–æ–≥—ñ–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–± —Ç–æ—â–æ), –∞–ª–µ —Ç—Ä–æ—Ö–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π (–¥–≤–∞ –æ–∫—Ä–µ–º—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ –±—ñ—Ä–∂—ñ). –í —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É, `exchange.place_order` –º–æ–∂–Ω–∞ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ ‚Äì –Ω–µ —Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–¥—Ä—É–≥–µ `amount`, –∞ –±—Ä–∞—Ç–∏ –≥–æ—Ç–æ–≤–∏–π, —ñ –Ω–µ —Ä–æ–±–∏—Ç–∏ OCO.

–ë—É–¥—å-—è–∫–∏–π –∑ –ø—ñ–¥—Ö–æ–¥—ñ–≤ –≤–∏–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –±–∞–≥. –ì–æ–ª–æ–≤–Ω–µ ‚Äì **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å**: –æ–¥–Ω–∞ –ª–æ–≥—ñ–∫–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞—Ö–∏—Å—Ç—É –∑–∞–º—ñ—Å—Ç—å –¥–≤–æ—Ö. –ó–∞–æ–¥–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `symbol` –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –º–µ—Ç–æ–¥—ñ `place_stop_loss_take_profit`. –ó–∞—Ä–∞–∑ –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `instId: symbol`. –£ —Ä–∞–∑—ñ OKX, ccxt-—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä **–º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—å** –≤—ñ–¥ human-readable —Å–∏–º–≤–æ–ª—É. –î–ª—è –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ –∫—Ä–∞—â–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ `market['id']` (–≤–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —É `self.markets`) –∑–∞–º—ñ—Å—Ç—å `symbol` ‚Äì —Ç–æ–¥—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞–º—ñ—Å—Ç—å `"ETH/USDT:USDT"` –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å—Å—è `"ETH-USDT-SWAP"` (–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É OKX). –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ü—å–æ–≥–æ –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–∏—á–∏–Ω–æ—é, —á–æ–º—É –ø–µ—Ä—à–∞ —Å–ø—Ä–æ–±–∞ OCO —ñ–Ω–æ–¥—ñ ‚Äú–Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–ª–∞‚Äù.

## 4. –õ–æ–≥—É–≤–∞–Ω–Ω—è —ñ –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤

**–Ø–∫ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è `get_logger()` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –ø–∏—Å–∞—Ç–∏ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–∏ (–Ω–∞ Windows-—à–ª—è—Ö C:/ScreenerNew/logs). –£ –∫–æ–¥—ñ –æ—Å–Ω–æ–≤–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤ (trade, exchange, —Ç–æ—â–æ) –≤–∏–∫–ª–∏–∫–∏ `logging.getLogger("...")` —Ä–æ–±–ª—è—Ç—å—Å—è, –∞–ª–µ **–Ω–µ –≤—Å—é–¥–∏** —á–µ—Ä–µ–∑ `get_logger`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É `TradeCore.__init__` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ `logging.getLogger("trade_core")` –±–µ–∑ —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤. –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Ç–æ–≥–æ, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `trade_core` –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ —É —Ñ–∞–π–ª (—è–∫—â–æ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è root-–ª–æ–≥–µ—Ä—É). –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–ª—è `trade_orders`, `position_manager` —Ç–æ—â–æ. –í –ª–æ–≥–∞—Ö `trade.log` –º–æ–∂–ª–∏–≤–æ –±—Ä–∞–∫—É—î –¥–µ—è–∫–∏—Ö –∑–∞–ø–∏—Å—ñ–≤.

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ω–µ–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥–µ—Ä—ñ–≤ —É—Å–∫–ª–∞–¥–Ω—é—î –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –±–∞–≥—ñ–≤. –î–µ—è–∫—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è/–ø–æ–º–∏–ª–∫–∏ –º–æ–≥–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –≤ —Ñ–∞–π–ª. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ `trade_core.calculate_amount_from_margin`, –≤–æ–Ω–∞ –∑–∞–ª–æ–≥—É—î—Ç—å—Å—è –Ω–∞ –ª–æ–≥–µ—Ä `trade_core` –∑ —Ä—ñ–≤–Ω–µ–º ERROR, –∞–ª–µ —Ü–µ–π –ª–æ–≥–µ—Ä –Ω–µ –±—É–≤ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ `get_logger`, —Ç–æ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–æ–∂–µ –Ω—ñ–¥–µ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏—Å—å –ø–æ–º—ñ—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
üëâ *–£–Ω—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è.* –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–µ ‚Äì –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–æ–¥—É–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `get_logger`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞ –ø–æ—á–∞—Ç–∫—É `trade_core.py` –¥–æ–¥–∞—Ç–∏:

```python
from ScreenerNew.config import get_logger  
self.logger = get_logger("trade_core")
```

–¢–æ–¥—ñ —É—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `trade_core` –ø—ñ–¥—É—Ç—å —É —Ñ–∞–π–ª `trade_core.log` (–∞–±–æ –º–æ–∂–Ω–∞ —Å–ø—Ä—è–º—É–≤–∞—Ç–∏ —ó—Ö –≤ –∑–∞–≥–∞–ª—å–Ω–∏–π trade.log). –¢–µ –∂ —Å–∞–º–µ –∑ `trade_orders`, `position_manager`, `indicators` —ñ —Ç.–¥. –¶–µ –¥–æ–ø–æ–º–æ–∂–µ –ø—Ä–∏ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—ñ ‚Äì –≤ –ª–æ–≥–∞—Ö –±—É–¥—É—Ç—å **–≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —Ç–∞ –ø–æ–º–∏–ª–∫–∏**. –ó–∞—Ä–∞–∑ –∂–µ —á–∞—Å—Ç–∏–Ω–∞ –¥–∞–Ω–∏—Ö –º–æ–≥–ª–∞ –≥—É–±–∏—Ç–∏—Å—è.

–¢–∞–∫–æ–∂ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ–±—Ä–æ–±–∫—É –≤–∏–Ω—è—Ç–∫—ñ–≤: —É –±–∞–≥–∞—Ç—å–æ—Ö –º—ñ—Å—Ü—è—Ö —î –±–ª–æ–∫–∏ `try/except Exception as e`, —è–∫—ñ –ª–∏—à–µ –ª–æ–≥—É—é—Ç—å –ø–æ–º–∏–ª–∫—É —ñ –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å —Ä–æ–±–æ—Ç—É. –¶–µ –¥–æ–±—Ä–µ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ, –∞–ª–µ –≤–∞–∂–ª–∏–≤–æ, —â–æ–± —Ü—ñ –ø–æ–º–∏–ª–∫–∏ –Ω–µ –∑–∞–ª–∏—à–∞–ª–∏—Å—è –Ω–µ–ø–æ–º—ñ—á–µ–Ω–∏–º–∏. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Ñ–∞–π–ª–∏ –ª–æ–≥—ñ–≤ **`errors`** –∞–±–æ **`exception`** ‚Äì –≤ `exchange.log`, `trade.log` –±—É–ª–æ –± –≤–∞—Ä—Ç–æ –∑–Ω–∞–π—Ç–∏ —Ç–∞–∫—ñ —Ä—è–¥–∫–∏. –Ø–∫—â–æ –≤–æ–Ω–∏ —î, –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—É:

* –ú–æ–∂–ª–∏–≤–æ, **–ø–æ–º–∏–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Å–∏–º–≤–æ–ª—É** –¥–ª—è OKX (—è–∫ –∑–≥–∞–¥—É–≤–∞–ª–æ—Å—å –≤–∏—â–µ) ‚Äì —Ç–æ–¥—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è `instId` –≤–∏—Ä—ñ—à–∏—Ç—å.
* –ê–±–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É —è–∫–æ–≥–æ—Å—å ccxt –º–µ—Ç–æ–¥—É –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –õ–æ–≥–∏ `exchange.log` –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ —Ç–µ–∫—Å—Ç –≤–∏–Ω—è—Ç–∫—É –≤—ñ–¥ ccxt/OKX API.

–ó–∞–≥–∞–ª–æ–º, –∑–∞—Ä–∞–∑ —Å–∏—Å—Ç–µ–º–∞ –≤–∂–µ –¥–æ—Å–∏—Ç—å —Å—Ç–∞–±—ñ–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î –≤–∏–Ω—è—Ç–∫–∏ (–Ω–µ –ø–∞–¥–∞—î, –∞ –ª–æ–≥—É—î —ó—Ö). –ê–ª–µ –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É –±–æ—Ç–∞ –ø—ñ—Å–ª—è –∑–º—ñ–Ω, –≤–∞–∂–ª–∏–≤–æ –º–∞—Ç–∏ –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —É –ª–æ–≥–∞—Ö. –í–∏–ø—Ä–∞–≤–∏–≤—à–∏ –≤–∏—â–µ–∑–≥–∞–¥–∞–Ω—ñ –º–æ–º–µ–Ω—Ç–∏, –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –±–æ—Ç–∞ –Ω–∞ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∞–±–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏—Ö —Å—É–º–∞—Ö, —ñ —É–≤–∞–∂–Ω–æ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ ‚Äì —Ü–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —â–æ **–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—É–º–∏ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤** —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—é—Ç—å –≥–ª–∞–¥–∫–æ, –±–µ–∑ –ø–æ–º–∏–ª–æ–∫.

# ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫ —Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –≤–∏—è–≤–∏–≤ –∫—ñ–ª—å–∫–∞ **–ª–æ–≥—ñ—á–Ω–∏—Ö –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤**, —è–∫—ñ —Å—Ç—Ä–∏–º—É—é—Ç—å –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –±–æ—Ç–∞ —Ç–∞ –º–æ–∂—É—Ç—å –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫ –Ω–∞ –±—ñ—Ä–∂—ñ:

* –ü–æ–¥–≤—ñ–π–Ω–µ —Ç–∞ –Ω–∞–¥—Ç–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–≥–æ–¥–∏ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ –ø—Ä–æ–ø—É—Å–∫—É —É–≥–æ–¥ –∞–±–æ –Ω–µ–¥–æ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–µ–ø–æ–∑–∏—Ç—É. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ü—å–æ–≥–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –±–æ—Ç—É –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –∞–≥—Ä–µ—Å–∏–≤–Ω–æ–≥–æ —Ä–æ—Å—Ç—É.
* –ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —á–∞—Å—Ç–∫–∏ –¥–µ–ø–æ–∑–∏—Ç—É –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–∞–¥–º—ñ—Ä–Ω–æ–≥–æ —Ä–∏–∑–∏–∫—É. –ß—ñ—Ç–∫–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞ (0.8% —á–∏ 30% ‚Äì –∑–≥—ñ–¥–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó) –∑—Ä–æ–±–∏—Ç—å —Ç–æ—Ä–≥—ñ–≤–ª—é –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—à–æ—é.
* –û–±—Ä–æ–±–∫–∞ –∑–∞—Ö–∏—Å–Ω–∏—Ö –æ—Ä–¥–µ—Ä—ñ–≤ —Å—Ç–∞–Ω–µ –Ω–∞–¥—ñ–π–Ω—ñ—à–æ—é –ø—ñ—Å–ª—è —É—Å—É–Ω–µ–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è ‚Äì —Ü–µ –≤–∞–∂–ª–∏–≤–æ, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ–π –±–µ–∑ SL/TP –∞–±–æ –∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–Ω–∏–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏.
* –ü–æ–∫—Ä–∞—â–µ–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –¥–æ–ø–æ–º–æ–∂—É—Ç—å —É –ø–æ–¥–∞–ª—å—à–æ–º—É —Ä–æ–∑–≤–∏—Ç–∫—É –±–æ—Ç–∞, –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –±—ñ—Ä–∂–æ–≤–∏–º–∏ API, —è–∫—ñ —á–∞—Å—Ç–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è.

–ó–∞—Å—Ç–æ—Å—É–≤–∞–≤—à–∏ –Ω–∞–≤–µ–¥–µ–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó, —Å–ª—ñ–¥ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–Ω–∞ –º–µ–Ω—à–æ–º—É –¥–µ–ø–æ–∑–∏—Ç—ñ –∞–±–æ –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º—ñ) —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ:

* –ö–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∞ –ø–æ–∑–∏—Ü—ñ—è –º–∞—î –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–∏–π —Å—Ç–æ–ø-–ª–æ—Å —ñ —Ç–µ–π–∫-–ø—Ä–æ—Ñ—ñ—Ç (–∞–±–æ —Ç—Ä–µ–π–ª—ñ–Ω–≥-—Å—Ç–æ–ø) **–æ–¥—Ä–∞–∑—É** –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è.
* –í –ª–æ–≥–∞—Ö –Ω–µ–º–∞—î –Ω–æ–≤–∏—Ö –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ –∞–±–æ –≤—ñ–¥–º–æ–≤ API.
* –§–∞–∫—Ç–∏—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º (—Ç–æ–±—Ç–æ –±–æ—Ç —ñ–Ω–≤–µ—Å—Ç—É—î —Å–∞–º–µ —Ç—É —á–∞—Å—Ç–∫—É, —â–æ –∑–∞–¥–∞–Ω–æ, —ñ —É–≥–æ–¥–∏ –Ω–µ —Å–∫–∞—Å–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è).

–ü—ñ—Å–ª—è —Ü–∏—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –±–æ—Ç –±—É–¥–µ –±—ñ–ª—å—à **–Ω–∞–¥—ñ–π–Ω–∏–º —ñ –∫–µ—Ä–æ–≤–∞–Ω–∏–º**, —â–æ –æ—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤–æ –ø—Ä–∏ –∞–≥—Ä–µ—Å–∏–≤–Ω—ñ–π —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —Ä–æ–∑–≥–æ–Ω—É –¥–µ–ø–æ–∑–∏—Ç—É. –£—Å–ø—ñ—Ö—ñ–≤ —É —Ç–æ—Ä–≥—ñ–≤–ª—ñ!
