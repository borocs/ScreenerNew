–û–∫–µ–π, —Ü–µ **—Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –∞—É–¥–∏—Ç —Ç–≤–æ—î—ó —Ç—Ä–µ–π–¥–∏–Ω–≥-—Å–∏—Å—Ç–µ–º–∏ "—è–∫ –≤–æ–Ω–∞ —î"**, –∑ –æ–ø–∏—Å–æ–º:

- üì¶ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- üîß –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- ‚öôÔ∏è –ª–æ–≥—ñ–∫–∏
- ü§ñ ML-—á–∞—Å—Ç–∏–Ω–∏
- ‚ö†Ô∏è –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º
- üß± –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —Ä–æ–±–æ—Ç–∏

---

# üßæ **–û–≥–ª—è–¥ ScreenerNew Trading Bot**  
### (—á–∞—Å—Ç–∏–Ω–∞ 1/3 ‚Äî –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞, –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –°—Ç—Ä–∞—Ç–µ–≥—ñ—è)

---

## üì¶ **–ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏**

```
ScreenerNew/
‚îú‚îÄ‚îÄ config.py                ‚Üê –≥–ª–æ–±–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –∫–ª—é—á—ñ, –ª—ñ–º—ñ—Ç–∏
‚îú‚îÄ‚îÄ exchange.py              ‚Üê CCXT-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ OKX
‚îú‚îÄ‚îÄ indicators.py            ‚Üê —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–µ—Ö. —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ + ML-—Å–∏–≥–Ω–∞–ª–∏
‚îú‚îÄ‚îÄ trade.py                 ‚Üê –≥–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª –±–æ—Ç–∞, –ª–æ–≥—ñ–∫–∞ –≤—Ö—ñ–¥/–≤–∏—Ö—ñ–¥
‚îú‚îÄ‚îÄ trade_core.py            ‚Üê SL/TP, –º–∞—Ä–∂–∞, –æ–±—Ä–∞—Ö—É–Ω–∫–∏
‚îú‚îÄ‚îÄ trade_orders.py          ‚Üê API-–æ—Ä–¥–µ—Ä–∏, —Ç—Ä–µ–π–ª—ñ–Ω–≥–∏, fallback
‚îú‚îÄ‚îÄ trade_position.py        ‚Üê –∫–æ–Ω—Ç—Ä–æ–ª—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π
‚îú‚îÄ‚îÄ trade_signals.py         ‚Üê –æ–±—Ä–æ–±–∫–∞ –ø–∞—Ä, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, –ø–µ—Ä–µ–¥–∞—á–∞ –≤ trade
‚îú‚îÄ‚îÄ display.py               ‚Üê –≤–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å
‚îú‚îÄ‚îÄ retrain_model.py         ‚Üê –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –¥–æ–Ω–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ train_initial_model.py   ‚Üê –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–µ –ø–æ—á–∞—Ç–∫–æ–≤–µ –Ω–∞–≤—á–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ state.json               ‚Üê —Å—Ç–∞–Ω –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö —É–≥–æ–¥
‚îú‚îÄ‚îÄ models/                  ‚Üê .pkl –º–æ–¥–µ–ª—ñ —ñ —Å–∫–µ–π–ª–µ—Ä–∏
‚îú‚îÄ‚îÄ data/historical/         ‚Üê —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ CSV –ø–æ –º–æ–Ω–µ—Ç–∞—Ö
```

---

## üîó **–ó–æ–≤–Ω—ñ—à–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (–ø–∞–∫–µ—Ç–∏)**

- `ccxt.async_support` ‚Äî –¥–æ—Å—Ç—É–ø –¥–æ OKX (—Ñ—ñ—á—ñ: fetch_ohlcv, place_order)
- `scikit-learn` ‚Äî RandomForest + StandardScaler
- `pandas`, `numpy` ‚Äî –æ–±—Ä–æ–±–∫–∞ OHLCV
- `asyncio` ‚Äî –≤–µ—Å—å –±–æ—Ç –ø—Ä–∞—Ü—é—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- `joblib` ‚Äî –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π
- `colorama` ‚Äî –∫–æ–ª—å–æ—Ä–æ–≤–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª
- `pandas_ta` (–æ–ø—Ü—ñ–π–Ω–æ) ‚Äî –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤

---

## üß† **ML-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—è**

- –ù–∞–≤—á–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `train_initial_model.py`
  - –î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ –±—É–¥—É—î—Ç—å—Å—è –º–æ–¥–µ–ª—å (`RandomForestClassifier`)
  - –û–∑–Ω–∞–∫–∏: `RSI`, `MACD`, `EMA50/200`, `ATR`, `Volume_MA14`, `support_proximity`
  - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ `models/random_forest_model_<pair>.pkl`

- –ú–æ–¥–µ–ª—ñ –¥–æ–Ω–∞–≤—á–∞—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 12 –≥–æ–¥ —á–µ—Ä–µ–∑ `retrain_model.py`  
  (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ —è–∫ —Ñ–æ–Ω–æ–≤–∏–π —Ç–∞—Å–∫ —É `trade.py`)

- –Ü–Ω—Ñ–µ—Ä–µ–Ω—Å —á–µ—Ä–µ–∑ `Indicators.generate_signals(df)`  
  ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è `buy`, `sell`, `hold` + –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ

---

## üéØ **–¢–æ—Ä–≥–æ–≤–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è**

1. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è**:
   - spread < MAX_SPREAD_PCT
   - volume > MIN_VOLUME_24H
   - volatility > VOLATILITY_THRESHOLD

2. **–°–∏–≥–Ω–∞–ª** (ML):
   - `buy_prob >= MIN_PROB_THRESHOLD` ‚Üí `buy`
   - `sell_prob >= MIN_PROB_THRESHOLD` ‚Üí `sell`
   - —ñ–Ω–∞–∫—à–µ `hold`

3. **–í—Ö—ñ–¥**:
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ `TradePositionManager.can_open_position`
   - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–∞—Ä–∂—ñ / —Ä–æ–∑–º—ñ—Ä—É —á–µ—Ä–µ–∑ `TradeCore`
   - –û—Ä–¥–µ—Ä —á–µ—Ä–µ–∑ `TradeOrderManager.place_order(...)`

4. **–í–∏—Ö—ñ–¥**:
   - OCO: SL + TP
   - Fallback: —Ç—Ä–µ–π–ª—ñ–Ω–≥ —Å—Ç–æ–ø
   - Final fallback: market close

---

**üëâ –î–∞–ª—ñ (—á–∞—Å—Ç–∏–Ω–∞ 2/3): –ü—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–æ—Ç–∏, –ª–æ–≥—ñ–∫–∞ —Ç—Ä–µ–π–¥–µ—Ä–∞, –ø—Ä–æ–±–ª–µ–º–∏ –π –æ–±—Ö—ñ–¥–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è. –ì–æ—Ç–æ–≤–∏–π?**

# üßæ **–û–≥–ª—è–¥ ScreenerNew Trading Bot**  
### (—á–∞—Å—Ç–∏–Ω–∞ 2/3 ‚Äî –ü—Ä–∏–Ω—Ü–∏–ø–∏, –õ–æ–≥—ñ–∫–∞ —Ç—Ä–µ–π–¥–µ—Ä–∞, –ü—Ä–æ–±–ª–µ–º–∏)

---

## üß± **–ü—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏**

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å**
   - –£—Å—ñ –∫–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (`exchange`, `indicators`, `positions`, `orders`) ‚Äî async
   - –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª –∑–∞–ø—É—Å–∫–∞—î –∞–Ω–∞–ª—ñ–∑ –ø–æ –∫–æ–∂–Ω—ñ–π –ø–∞—Ä—ñ ‚Üí —Å–∏–≥–Ω–∞–ª ‚Üí –¥—ñ—é
   - ML retrain –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –≤ —Ñ–æ–Ω—ñ (`asyncio.create_task(...)`)

2. **–°—Ç–µ–π—Ç-–º–∞—à–∏–Ω–∞**
   - –í—Å—ñ –≤—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ–∑–∏—Ü—ñ—ó —Ç—Ä–µ–∫–∞—é—Ç—å—Å—è –≤ `self.position_metadata`
   - `state.json` ‚Äî —Å—Ö–æ–≤–∏—â–µ —Å—Ç–∞—Ç—É—Å—ñ–≤ (–º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è recovery –ø—ñ—Å–ª—è –ø–∞–¥—ñ–Ω–Ω—è)

3. **–ö–µ—à—É–≤–∞–Ω–Ω—è**
   - `ohlcv_cache` –∑–±–µ—Ä—ñ–≥–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ 250-800 —Å–≤—ñ—á–æ–∫ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª—É
   - –ü–æ–∑–∏—Ü—ñ—ó –∫–µ—à—É—é—Ç—å—Å—è –≤ `cached_active_positions`

4. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–æ —Å–∏–≥–Ω–∞–ª—É**
   - –Ω–µ –∫–æ–∂–Ω–∞ –ø–∞—Ä–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤ –∞–Ω–∞–ª—ñ–∑
   - —è–∫—â–æ –Ω–µ –ø—Ä–æ–π—à–æ–≤ spread/volume ‚Äî `filtered_pairs[symbol] = –ø—Ä–∏—á–∏–Ω–∞`

5. **–õ–æ–≥—ñ–∫–∞ —Ä—ñ—à–µ–Ω—å**
   - —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ —Ç—Ä–µ–π–¥ –ø—Ä–∏–π–º–∞—î—Ç—å—Å—è *–ª–∏—à–µ —è–∫—â–æ –≤—Å—ñ —É–º–æ–≤–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ*:
     - –ø–∞—Ä–∞ –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞
     - –Ω–µ–º–∞ –≤—ñ–¥–∫—Ä–∏—Ç–æ—ó –ø–æ–∑–∏—Ü—ñ—ó
     - –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å buy/sell –ø–µ—Ä–µ–≤–∏—â—É—î `MIN_PROB_THRESHOLD`
     - ML –º–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞
     - API –¥–æ—Å—Ç—É–ø–Ω–µ

---

## üîÑ **–õ–æ–≥—ñ–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª—É (`Trade.start`)**

1. `for symbol in PAIRS`:
   - –æ—Ç—Ä–∏–º—É—î order book —Ç–∞ ohlcv
   - –∑–∞—Å—Ç–æ—Å–æ–≤—É—î —Ñ—ñ–ª—å—Ç—Ä–∏
   - –≥–µ–Ω–µ—Ä—É—î —Å–∏–≥–Ω–∞–ª

2. —è–∫—â–æ —Å–∏–≥–Ω–∞–ª = buy/sell:
   - –ø–µ—Ä–µ–≤—ñ—Ä—è—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Ö–æ–¥—É (–ø–æ–∑–∏—Ü—ñ—è, –±–∞–ª–∞–Ω—Å)
   - —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î amount
   - —Å—Ç–≤–æ—Ä—é—î –æ—Ä–¥–µ—Ä

3. –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è:
   - —Å—Ç–≤–æ—Ä—é—î SL/TP
   - –∞–±–æ fallback –Ω–∞ —Ç—Ä–µ–π–ª—ñ–Ω–≥

4. –ø–æ—Å—Ç—ñ–π–Ω–æ –ª–æ–≥—É—é—Ç—å—Å—è:
   - –≤—Å—ñ –¥—ñ—ó, —Å–∏–≥–Ω–∞–ª–∏, –≤—ñ–¥–º–æ–≤–∏
   - `display` –ø–æ–∫–∞–∑—É—î —Å–∏–≥–Ω–∞–ª, —Ç—Ä–µ–π–¥, —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## ‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Å–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è       | –ü—Ä–æ–±–ª–µ–º–∞                                                                 |
|----------------|--------------------------------------------------------------------------|
| ‚ùå **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å** | `Trade` ‚Äî –º–æ–Ω–æ–ª—ñ—Ç, –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–∫–∏                         |
| üß† **ML –æ–±—Ä–æ–±–∫–∞**  | –°–∏–≥–Ω–∞–ª–∏ –Ω–µ –º–∞—é—Ç—å explainability (—á–æ–º—É buy?), –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SHAP     |
| üîí **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**   | –ë–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–∫–∏ –ø–æ–∫–ª–∞–¥–∞—î—Ç—å—Å—è –Ω–∞ —Å–ª–æ–≤–Ω–∏–∫–∏ –±–µ–∑ schema –∞–±–æ —Ç–∏–ø—ñ–≤            |
| üß± **SL/TP —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ** | –ù–µ –≤—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å (–¥–∏–Ω–∞–º—ñ—á–Ω—ñ —Å—Ç–æ–ø–∏ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ)      |
| ‚ö†Ô∏è **Fallback**    | –Ø–∫—â–æ –≤—Å—ñ —Å–∏—Å—Ç–µ–º–∏ —Ñ–µ–π–ª—è—Ç (OCO, —Ç—Ä–µ–π–ª—ñ–Ω–≥) ‚Äî –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ç—Ä–µ—Ç—ñ–π —Ä—ñ–≤–µ–Ω—å      |
| ‚õî **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** | –ù–µ–º–∞—î –∞–Ω–∞–ª—ñ–∑—É –µ–∫—Å–ø–æ–∑–∏—Ü—ñ—ó, –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É, max loss, session PnL |
| üìä **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞**    | –ù–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —Ç—Ä–µ–π–¥—ñ–≤ –≤ –±–∞–∑—É –∞–±–æ —Ç–∞–±–ª–∏—Ü—é                    |
| üßº **–õ–æ–≥—ñ–∫–∞ —Å–∏–≥–Ω–∞–ª—ñ–≤** | `generate_signals()` = 1 –≤–µ–ª–∏–∫–∏–π –º–µ—Ç–æ–¥ ‚Äî –≤–∞–∂–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏, –∑–º—ñ–Ω—é–≤–∞—Ç–∏  |

---

## üîç –û—Å–æ–±–ª–∏–≤–æ –∫—Ä–∏—Ç–∏—á–Ω–µ

- **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø—ñ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –ø—Ä–∏ —Ñ–µ–π–ª—ñ –º–æ–¥–µ–ª—ñ**
  - —è–∫—â–æ `.pkl` –Ω–µ–º–∞—î –∞–±–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π ‚Üí –±–æ—Ç –ø—Ä–æ—Å—Ç–æ –º–æ–≤—á–∏—Ç—å
- **–í—Å—è –ª–æ–≥—ñ–∫–∞ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ ‚Äî –ø–æ—Ä—ñ–≥–æ–≤–∞**
  - `buy_prob >= 0.6` ‚Äî –≤—Å–µ, —ñ–Ω–∞–∫—à–µ –Ω—ñ—á–æ–≥–æ. –ù–µ–º–∞—î `ranking`, `confidence bands`, `ensemble voting`

---

**üëâ –î–∞–ª—ñ (—á–∞—Å—Ç–∏–Ω–∞ 3/3): –ü–æ—Ç–µ–Ω—Ü—ñ–∞–ª —Ä–æ–∑–≤–∏—Ç–∫—É, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –∞–ø–≥—Ä–µ–π–¥–∏** ‚Äî –≥–æ—Ç–æ–≤–∏–π?

# üßæ **–û–≥–ª—è–¥ ScreenerNew Trading Bot**  
### (—á–∞—Å—Ç–∏–Ω–∞ 3/3 ‚Äî –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è, –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞, –ü–æ—Ç–µ–Ω—Ü—ñ–∞–ª —Ä–æ–∑–≤–∏—Ç–∫—É)

---

## üöÄ **–ü–æ—Ç–µ–Ω—Ü—ñ–∞–ª —Ä–æ–∑–≤–∏—Ç–∫—É —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è**

---

### üîß **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å —ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

üî∏ **–†–æ–∑–±–∏—Ç–∏ `Trade` –Ω–∞ —Å–µ—Ä–≤—ñ—Å–∏:**
- `TradeManager` ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω–∏, –±–∞–ª–∞–Ω—Å, –∞–∫—Ç–∏–≤–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó
- `SignalEvaluator` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∏–≥–Ω–∞–ª—É + —Ñ—ñ–ª—å—Ç—Ä–∏
- `OrderExecutor` ‚Äî –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤, SL/TP
- `TradeLogger` ‚Äî –ª–æ–≥—ñ–∫–∞ –ª–æ–≥—ñ–≤, –≤–∏–≤–æ–¥—ñ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

üî∏ **–í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ –æ–±'—î–∫—Ç–∏:**
- `TradeSignal` ‚Üí –∑–∞–º—ñ—Å—Ç—å dict
- `Position` ‚Üí –∑ –º–µ—Ç–æ–¥–∞–º–∏ `.pnl()`, `.duration()`
- `ExecutionResult` ‚Üí –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ç—Ä–µ–π–¥–∏–Ω–≥–æ–≤–∏—Ö –¥—ñ–π

---

### üß† **ML + –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞**

üî∏ **Feature importance / SHAP**
- –ü–æ–∫–∞–∑–∞—Ç–∏: —á–æ–º—É buy? –©–æ –≤–ø–ª–∏–Ω—É–ª–æ?
- –ú–æ–∂–Ω–∞ –ª–æ–≥—É–≤–∞—Ç–∏ 3 –Ω–∞–π—Å–∏–ª—å–Ω—ñ—à–∏—Ö —Ñ—ñ—á—ñ, —è–∫—ñ –¥–∞–ª–∏ push

üî∏ **–õ–æ–≥—É–≤–∞–Ω–Ω—è PnL —É SQLite –∞–±–æ CSV**
- —Ç–∞–±–ª–∏—Ü—è –∑ —É–≥–æ–¥–∞–º–∏:
  - –¥–∞—Ç–∞, –ø–∞—Ä–∞, —Ü—ñ–Ω–∞ –≤—Ö–æ–¥—É/–≤–∏—Ö–æ–¥—É, PnL%, –∞–±—Å–æ–ª—é—Ç–Ω–∏–π PnL
- –º–æ–∂–Ω–∞ —Ä–æ–±–∏—Ç–∏ `daily summary`

üî∏ **Auto-Retrain –∫–æ–Ω—Ç—Ä–æ–ª—å**
- –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ `accuracy` –ø—ñ—Å–ª—è retrain
- —è–∫—â–æ < threshold ‚Üí –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—å

---

### üß† **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Ç—Ä–µ–π–¥–∏–Ω–≥–æ–≤–æ—ó –ª–æ–≥—ñ–∫–∏**

| –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è | –©–æ –¥–∞—î |
|------------|--------|
| ‚úÖ `ATR-based SL/TP` | –î–∏–Ω–∞–º—ñ—á–Ω—ñ —Å—Ç–æ–ø–∏ –ø—ñ–¥ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å |
| ‚úÖ `Position Sizing by Volatility` | –ú–µ–Ω—à–µ —Ä–∏–∑–∏–∫—É –Ω–∞ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∏—Ö –∞–∫—Ç–∏–≤–∞—Ö |
| ‚úÖ `Trailing ROI Guard` | –ó–∞–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥–∏, —è–∫—â–æ PnL –ø–∞–¥–∞—î –ø—ñ—Å–ª—è TP-–∑–æ–Ω–∏ |
| ‚úÖ `Max Drawdown` | –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∑–ª–∏–≤—É (—Å—Ç–æ–ø —Ç—Ä–µ–π–¥–∏–Ω–≥—É –Ω–∞ –¥–µ–Ω—å) |

---

### üåê **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**

- **Telegram –±–æ—Ç**: –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ —Å–∏–≥–Ω–∞–ª–∏, –∑–∞–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥
- **WebSocket/REST API**: –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Ä—É—á–Ω—É –∫–µ—Ä—É–≤–∞—Ç–∏ –±–æ—Ç–æ–º (force buy/exit)
- **Dashboard (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, FastAPI + React)**: –≥—Ä–∞—Ñ—ñ–∫–∏, —Ç—Ä–µ–π–¥–∏, –ª–æ–≥—ñ–∫–∞ —Å–∏–≥–Ω–∞–ª—ñ–≤

---

## üß± **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–æ: –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞...**

- **Event-driven loop**: —Ç—Ä–µ–π–¥–∏–Ω–≥ —Ä–µ–∞–≥—É—î –Ω–∞ –∑–º—ñ–Ω—É —Ä–∏–Ω–∫—É, –∞ –Ω–µ –ø–æ —Ç–∞–π–º–µ—Ä—É
- **Data pipeline**: raw ‚Üí clean ‚Üí feature ‚Üí predict ‚Üí decision
- **Model manager**: –æ–∫—Ä–µ–º–∏–π —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Ç—Ä–µ–∫—ñ–Ω–≥—É –º–æ–¥–µ–ª–µ–π, —è–∫ —É MLflow

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–¢–≤—ñ–π –±–æ—Ç —É–∂–µ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ –∑—Ä—ñ–ª–∏–π**, –º–∞—î ML, SL/TP, —Ç—Ä–µ–π–ª—ñ–Ω–≥, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∏–∑–∏–∫—É —á–µ—Ä–µ–∑ `can_open_position` —ñ async-–ø—ñ–¥—Ö—ñ–¥.

–ê–ª–µ:
- –º–æ–∂–Ω–∞ **–≤–∏—á–∏—Å—Ç–∏—Ç–∏ –º–æ–Ω–æ–ª—ñ—Ç–Ω—ñ—Å—Ç—å**
- –¥–æ–¥–∞—Ç–∏ **—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É/–∫–æ–Ω—Ç—Ä–æ–ª—é**
- –ø–æ–±—É–¥—É–≤–∞—Ç–∏ **—Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω—É —Å–∏—Å—Ç–µ–º—É**, —â–æ –≤–∏—Ç—Ä–∏–º–∞—î –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è

---

üìå –ì–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –µ—Ç–∞–ø–æ–º:
- –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –±–∞–∑—É —Ç—Ä–µ–π–¥—ñ–≤
- –∑—Ä–æ–±–∏—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π summary-–¥–∏—Å–ø–ª–µ–π
- —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ PnL –∞–Ω–∞–ª—ñ–∑
- —á–∏ –Ω–∞–≤—ñ—Ç—å –ø–æ–≤–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä –∑ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–æ—é —Å—Ö–µ–º–æ—é

> –í–∏–±–∏—Ä–∞–π –Ω–∞–ø—Ä—è–º ‚Äî —ñ –∫–æ–ø–∞—î–º–æ –¥–∞–ª—ñ.